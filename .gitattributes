import pygame
import random

# 初始化 Pygame
pygame.init()

# 屏幕尺寸
WIDTH, HEIGHT = 600, 400
screen = pygame.display.set_mode((WIDTH, HEIGHT))
pygame.display.set_caption("Angpao Slot Machine")

# 颜色定义
WHITE = (255, 255, 255)
BLACK = (0, 0, 0)
RED = (255, 0, 0)

# 载入图标（用红色方块代替）
ICONS = ["💰", "🧧", "888", "🎉", "⭐"]  # 不同的中奖图标

# 字体
font = pygame.font.Font(None, 50)
small_font = pygame.font.Font(None, 36)

# 变量
slots = ["❓", "❓", "❓"]  # 初始老虎机状态
balance = 100  # 初始金币
running = True

# 按钮
spin_button = pygame.Rect(250, 300, 100, 50)

# 游戏主循环
while running:
    screen.fill(WHITE)
    
    # 显示当前金币
    balance_text = small_font.render(f"Coins: {balance}", True, BLACK)
    screen.blit(balance_text, (20, 20))
    
    # 显示老虎机结果
    for i in range(3):
        slot_text = font.render(slots[i], True, RED)
        screen.blit(slot_text, (150 + i * 100, 150))
    
    # 画出按钮
    pygame.draw.rect(screen, BLACK, spin_button)
    button_text = small_font.render("SPIN", True, WHITE)
    screen.blit(button_text, (spin_button.x + 25, spin_button.y + 15))
    
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False
        
        if event.type == pygame.MOUSEBUTTONDOWN:
            if spin_button.collidepoint(event.pos) and balance >= 10:
                balance -= 10  # 每次 spin 扣 10 金币
                slots = [random.choice(ICONS) for _ in range(3)]
                
                # 判断中奖
                if slots[0] == slots[1] == slots[2]:
                    if slots[0] == "888":
                        balance += 100  # 888 是大红包，赢取 100 金币
                    else:
                        balance += 50  # 其他相同图案，赢取 50 金币
    
    pygame.display.flip()

pygame.quit()
